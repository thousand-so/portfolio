<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>당신은 올해? setInterval setTimeout</title>
    <script src="https://code.jquery.com/jquery-3.2.1.min.js" type="text/javascript"></script>
</head>
<body>

<!--
    setTimeout(함수, 시간) : 일정 시간 후 함수 실행
    setInterval(함수, 시간) : 일정 시간 간격으로 함수 반복 실행
    clearTimeouit(id) : 실행되고 있는 timeout을 중지
    clearInterval(id) : 실행되고 있는 interval을 중지
-->
<div id="content" style="width:1000px; margin:400px auto; text-align:center;">
    <h1>&#60; 버튼 누르고 3초 뒤 alert &#62;</h1>
    <table style="margin:0 auto;">
        <tbody>
            <tr>
                <td id="btn" style="width:500px; height:50px; border:solid 1px #ccc; cursor:pointer; text-align:center; font-size:30px;">click here</td>
            </tr>
        </tbody>
    </table>

    <script type="text/javascript">
        $(document).ready(function() {
            $('#btn').on('click', function() {
                hey();
            });
            function hey() {
                var sec = 300;
                setText();

                function alertFunc() {
                    alert('칼퇴다');
                }

                function setText() {
                    document.getElementById('btn').innerText = sec--;
                }

                setTimeout(alertFunc, 3005);

                //0.01초 간격으로 3초 동안 text 변경
                var intervalID = setInterval(setText, 10);
                setTimeout(function() {
                    clearInterval(intervalID);
                    document.getElementById('btn').innerText="click here";
                }, 3000);
            }
        });
    </script>

    <h1>&#60; 당신은 &#62;</h1>
    <p style="line-height:30px; font-size:30px; width:1000px; text-align:left;">
        <button id="start" style="border:solid 1px #ff0000; padding:2px 8px; font-size:30px; color:#ff0000; background-color:#fff; cursor:pointer">START</button>
        &nbsp;&nbsp;&nbsp;당신은 올 해 &nbsp;
        <span id="ex01">디즈니월드</span>&nbsp;에서
        <span id="ex02">놀이기구를 탈 것입니다.</span>
    </p>
</div>

<script type="text/javascript">
    $(document).ready(function() {
        $('#start').on('click', function() {
            nah();
        });

        var ex02state = 'stop';
        var interval1;
        var interval2;

        function nah() {
            var arr1 = ['꽃밭에서', '풀장에서', '친구집에서', '빵집에서', '진주에서', '사무실에서', '디즈니월드'];
            var arr2 = ['공부할 것입니다', '게임할 것입니다', '마카롱을 먹을 것입니다', '요리할 것입니다', '꽃놀이 할 것입니다', '수영할 것입니다', '놀이기구를 탈 것입니다'];

            var idx1 = 0;
            var idx2 = 0;

            if (ex02state == 'stop') {
                interval1 = setInterval(setText01, 30);
                interval2 = setInterval(setText02, 20);
                document.getElementById('start').innerText="STOP";
                ex02state = 'start';
            } else {
                clearInterval(interval1);
                clearInterval(interval2);
                document.getElementById('start').innerText="START";
                ex02state = 'stop';
            }

            function setText01 () {
                if (idx1 >= arr1.length) {
                    idx1 = 0;
                }
                $('#ex01').text(arr1[idx1++]);
            }

            function setText02 () {
                if (idx2 >= arr2.length) {
                    idx2 = 0;
                }
                $('#ex02').text(arr2[idx2++]);
            }

        }

    });

</script>

</body>
</html>